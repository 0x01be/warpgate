<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Adding favicon -->
    

    <!-- Adding meta -->
    

    <!-- Adding external script-->
    

    <!-- Adding external style-->
    

    <!-- Adding scripts-->
    

    <!-- Adding style-->
    

    <!-- Adding overlay script-->
    

    <!-- Adding overlay style-->
    


    <title>
      Home
    </title>

    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/third-party/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/third-party/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/reset.css">
    <link type="text/css" rel="stylesheet" href="styles/clean-jsdoc-theme-base.css">
    <link type="text/css" rel="stylesheet" href="styles/clean-jsdoc-theme-dark.css">
    
    <svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
    style="display:none">
    <defs>
        <symbol id="copy-icon" viewbox="0 0 488.3 488.3">
            <g>
                <path
                    d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z" />
                <path
                    d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z" />
            </g>
        </symbol>
        <symbol id='search-icon' viewBox="0 0 512 512">
            <g>
                <g>
                    <path
                        d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z" />
                </g>
            </g>
            <g>
                <g>
                    <path
                        d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z" />
                </g>
            </g>
        </symbol>
        <symbol id="down-icon" viewBox="0 0 16 16">
            <path 
                fill-rule="evenodd" 
                clip-rule="evenodd" 
                d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"
            >
            </path>
        </symbol>
    </defs>
</svg>
  </head>

  <body>

    <nav class="navbar" id="navbar">
      <div class="navbar-heading" id="navbar-heading"><a href="index.html"><h2 class="navbar-heading-text">Home</h2></a></div><div class="search-box" id="search-box"><div class="search-box-input-container"><input class="search-box-input" type="text" placeholder="Search..." id="search-box-input" /><svg class="search-icon" alt="search-icon"><use xlink:href="#search-icon"></use></svg></div><div class="search-item-container" id="search-item-container"><ul class="search-item-ul" id="search-item-ul"></ul></div></div><div class="sidebar-main-content" id="sidebar-main-content"><div class="accordion collapsed" id="8711654" > <h3 class="accordion-heading">Classes<svg><use xlink:href="#down-icon"></use></svg></h3><ul class="accordion-content"><li class="accordion collapsed child" id=2222175><div class="accordion-heading child"><a href="Crosshairs.html">Crosshairs</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class='methods accordion-content'><li data-type='method'><a href="Crosshairs.html#.getTag">getTag</a></li><li data-type='method'><a href="Crosshairs.html#_drawControlIcon">_drawControlIcon</a></li><li data-type='method'><a href="Crosshairs.html#_drawRulerText">_drawRulerText</a></li><li data-type='method'><a href="Crosshairs.html#activatePreviewListeners">activatePreviewListeners</a></li><li data-type='method'><a href="Crosshairs.html#draw">draw</a></li><li data-type='method'><a href="Crosshairs.html#drawPreview">drawPreview</a></li><li data-type='method'><a href="Crosshairs.html#refresh">refresh</a></li><li data-type='method'><a href="Crosshairs.html#toObject">toObject</a></li></ul></li><li class="accordion collapsed child" id=4386527><div class="accordion-heading child"><a href="MutationStack.html">MutationStack</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class='methods accordion-content'><li data-type='method'><a href="MutationStack.html#commit">commit</a></li><li data-type='method'><a href="MutationStack.html#deleteAll">deleteAll</a></li><li data-type='method'><a href="MutationStack.html#find">find</a></li><li data-type='method'><a href="MutationStack.html#getName">getName</a></li><li data-type='method'><a href="MutationStack.html#update">update</a></li><li data-type='method'><a href="MutationStack.html#updateAll">updateAll</a></li></ul></li></ul> </div><div class="accordion collapsed" id="4505344" > <h3 class="accordion-heading">Namespaces<svg><use xlink:href="#down-icon"></use></svg></h3><ul class="accordion-content"><li class="accordion collapsed child" id=5545345><div class="accordion-heading child"><a href="warpgate.html">warpgate</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class='methods accordion-content'><li data-type='method'><a href="warpgate.html#.buttonDialog">buttonDialog</a></li><li data-type='method'><a href="warpgate.html#.dismiss">dismiss</a></li><li data-type='method'><a href="warpgate.html#.menu">menu</a></li><li data-type='method'><a href="warpgate.html#.mutate">mutate</a></li><li data-type='method'><a href="warpgate.html#.mutationStack">mutationStack</a></li><li data-type='method'><a href="warpgate.html#.revert">revert</a></li><li data-type='method'><a href="warpgate.html#.spawn">spawn</a></li><li data-type='method'><a href="warpgate.html#.spawnAt">spawnAt</a></li><li data-type='method'><a href="warpgate.html#.wait">wait</a></li></ul></li><li class="accordion-list" id=""><a href="warpgate.abstract.html">abstract</a></li><li class="accordion collapsed child" id=644127><div class="accordion-heading child"><a href="warpgate.crosshairs.html">crosshairs</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class='methods accordion-content'><li data-type='method'><a href="warpgate.crosshairs.html#.collectPlaceables">collectPlaceables</a></li><li data-type='method'><a href="warpgate.crosshairs.html#.getTag">getTag</a></li><li data-type='method'><a href="warpgate.crosshairs.html#.show">show</a></li></ul></li><li class="accordion collapsed child" id=2361057><div class="accordion-heading child"><a href="warpgate.dnd5e.html">dnd5e</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class='methods accordion-content'><li data-type='method'><a href="warpgate.dnd5e.html#.rollItem">rollItem</a></li></ul></li><li class="accordion-list" id=""><a href="warpgate.event.html">event</a></li><li class="accordion collapsed child" id=966533><div class="accordion-heading child"><a href="warpgate.plugin.html">plugin</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class='methods accordion-content'><li data-type='method'><a href="warpgate.plugin.html#.queueUpdate">queueUpdate</a></li></ul></li><li class="accordion collapsed child" id=9450382><div class="accordion-heading child"><a href="warpgate.util.html">util</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class='methods accordion-content'><li data-type='method'><a href="warpgate.util.html#.firstGM">firstGM</a></li><li data-type='method'><a href="warpgate.util.html#.firstOwner">firstOwner</a></li><li data-type='method'><a href="warpgate.util.html#.isFirstGM">isFirstGM</a></li><li data-type='method'><a href="warpgate.util.html#.isFirstOwner">isFirstOwner</a></li></ul></li></ul> </div><div class="accordion collapsed" id="4188955" > <h3 class="accordion-heading">Global<svg><use xlink:href="#down-icon"></use></svg></h3><ul class="accordion-content"><li class="accordion-list" id=""><a href="global.html#ComparisonKeys">ComparisonKeys</a></li><li class="accordion-list" id=""><a href="global.html#CrosshairsConfig">CrosshairsConfig</a></li><li class="accordion-list" id=""><a href="global.html#CrosshairsData">CrosshairsData</a></li><li class="accordion-list" id=""><a href="global.html#MutationData">MutationData</a></li><li class="accordion-list" id=""><a href="global.html#MutationOptions">MutationOptions</a></li><li class="accordion-list" id=""><a href="global.html#ParallelShow">ParallelShow</a></li><li class="accordion-list" id=""><a href="global.html#PostDelta">PostDelta</a></li><li class="accordion-list" id=""><a href="global.html#PostMutate">PostMutate</a></li><li class="accordion-list" id=""><a href="global.html#PostSpawn">PostSpawn</a></li><li class="accordion-list" id=""><a href="global.html#PreSpawn">PreSpawn</a></li><li class="accordion-list" id=""><a href="global.html#Shorthand">Shorthand</a></li><li class="accordion-list" id=""><a href="global.html#SpawningOptions">SpawningOptions</a></li><li class="accordion-list" id=""><a href="global.html#WarpOptions">WarpOptions</a></li><li class="accordion-list" id=""><a href="global.html#WorkflowOptions">WorkflowOptions</a></li></ul> </div>
      

    </nav>
    <div class="navbar-ham" id="navbar-ham">
      <div>
        <div class="first"></div>
        <div class="second"></div>
        <div class="third"></div>
      </div>
    </div>

    <div id="main" class="main-content">
      

      



    









    


    <section class="readme">
        <article><h1>Warp Gate</h1>
<h3 align="center"> <img alt="GitHub release (latest by date)" src="https://img.shields.io/github/downloads/trioderegion/warpgate/latest/total?color=blue&label=latest%20downloads"> Reinforcements have arrived <img alt="GitHub all releases" src="https://img.shields.io/github/downloads/trioderegion/warpgate/total?color=blue&label=total%20downloads"> </h3>
<p>Warp Gate, in its current form, is a system-agnostic library module for Foundry VTT that provides a growing number of API functions to make programmatically spawning tokens and modifying those tokens easier for players and GMs alike.</p>
<p>https://user-images.githubusercontent.com/14878515/127940403-40301919-8a12-42e0-b3c4-7711f6e64b3b.mp4</p>
<p>Be sure to check out the <a href="https://github.com/trioderegion/warpgate/wiki">Warp Gate Wiki</a> for specific examples and further discussion!</p>
<h2>Table of Contents</h2>
<details>
<summary>
	Click to expand
</summary>
<ul>
<li><a href="#spawning-commands">Spawning Commands</a>
<ul>
<li><a href="#spawn">spawn</a></li>
<li><a href="#spawnat">spawnAt</a></li>
</ul>
</li>
<li><a href="#spawn-callback-functions">Spawn Callback Functions</a>
<ul>
<li><a href="#pre">pre</a></li>
<li><a href="#post">post</a></li>
</ul>
</li>
<li><a href="#mutation-commands">Mutation Commands</a>
<ul>
<li><a href="#mutate">mutate</a></li>
<li><a href="#revert">revert</a></li>
</ul>
</li>
<li><a href="#mutation-callback-functions">Mutation Callback Functions</a>
<ul>
<li><a href="#delta">delta</a></li>
<li><a href="#post">post</a></li>
</ul>
</li>
<li><a href="#mutation-stack-utility">Mutation Stack Utility</a></li>
<li><a href="#mutationstack-class-methods">MutationStack Class Methods</a></li>
<li><a href="#crosshairs-commands">Crosshairs Commands</a>
<ul>
<li><a href="#show">show</a></li>
<li><a href="#gettag">getTag</a></li>
<li><a href="#collect">collect</a></li>
</ul>
</li>
<li><a href="#crosshairs-config">Crosshairs Config</a></li>
<li><a href="#crosshairs-callback-functions">Crosshairs Callback Functions</a></li>
<li><a href="#helper-functions">Helper Functions</a>
<ul>
<li><a href="#wait">wait</a></li>
<li><a href="#dismiss">dismiss</a></li>
<li><a href="#buttondialog">buttonDialog</a></li>
<li><a href="#dialog">dialog</a></li>
<li><a href="#menu">menu</a></li>
</ul>
</li>
<li><a href="#update-shorthand">Update Shorthand</a>
<ul>
<li><a href="#add">Add</a></li>
<li><a href="#update">Update</a></li>
<li><a href="#delete">Delete</a></li>
<li><a href="#embedded-structure">embedded Structure</a></li>
</ul>
</li>
<li><a href="#event-system">Event System</a>
<ul>
<li><a href="#watch">watch</a></li>
<li><a href="#trigger">trigger</a></li>
<li><a href="#remove">remove</a></li>
<li><a href="#notify">notify</a></li>
<li><a href="#eventdata">eventData</a>
<ul>
<li><a href="#actordata">actorData</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#special-thanks">Special Thanks</a></li>
</ul>
</details>
<h2>Spawning Commands</h2>
<h3>spawn</h3>
<h3>spawnAt</h3>
<h2>Spawn Callback Functions</h2>
<h3>pre</h3>
<h3>post</h3>
<h2>Mutation Commands</h2>
<h3>mutate</h3>
<h3>revert</h3>
<h2>Mutation Callback Functions</h2>
<h3>delta</h3>
<h3>post</h3>
<h2>Mutation Stack Utility</h2>
<h3>MutationStack Class Fields</h3>
<h3>MutationStack Class Methods</h3>
<h2>Crosshairs Commands</h2>
<h3>show</h3>
<h3>getTag</h3>
<p>Signature: <code>warpgate.crosshairs.getTag(key)</code></p>
<p>Will retrieve the active crosshairs instance with the defined tag identifier.</p>
<ul>
<li><code>key</code> {*} Will be compared against the Crosshairs <code>tag</code> field for equality.</li>
</ul>
<p><code>return value</code> {Crosshairs} Active Crosshairs matching the given key or <code>undefined</code> if no match</p>
<h3>collect</h3>
<p>Signature: <code>warpgate.crosshairs.collect(crosshairsData, types, containedFilter = Gateway._containsCenter)</code></p>
<p>Returns desired types of placeables whose center point is within the crosshairs radius or another user defined filter function.</p>
<ul>
<li><code>crosshairsData</code> {Object}. Requires at least {x,y,radius,scene} (all in pixels)</li>
<li><code>types</code> {Array<String> = <code>['Token']</code>} Collects the desired embedded placeable types.</li>
<li><code>containedFilter</code> {Function = <code>Gateway._containsCenter</code>}. Optional function for determining if a placeable is contained by the crosshairs. Default function tests for centerpoint containment. Expected signature <code>Boolean function(placeable, crosshairsData)</code>: given a Placeable object and the crosshairs data, return a boolean indicating if the placeable should be counted as contained with the crosshair's area.</li>
</ul>
<p><code>return</code> {Object&lt;embeddedName: collected&gt;} List of collected placeables keyed by embeddedName</p>
<h2>Crosshairs Config</h2>
<p>This object controls how the crosshairs will be displayed and decorated. Each field is optional and the default value is listed in parentheses.</p>
<ul>
<li><code>size</code> {Number = <code>1</code>} The initial diameter of the crosshairs outline in grid squares</li>
<li><code>icon</code> {String = <code>'icons/svg/dice-target.svg'</code>} The icon displayed in the center of the crosshairs</li>
<li><code>label</code> {String = <code>''</code>} The text to display below the crosshairs outline</li>
<li><code>labelOffset</code> {Object} Pixel offset from the label's initial relative position below the outline
<ul>
<li><code>x</code> {Number = <code>0</code>}</li>
<li><code>y</code> {Number = <code>0</code>}</li>
</ul>
</li>
<li><code>tag</code> {*}(<code>'crosshairs'</code>) Arbitrary value used to identify this crosshairs object</li>
<li><code>drawIcon</code> {Boolean = <code>true</code>} Controls the display of the center icon of the crosshairs</li>
<li><code>drawOutline</code> {Boolean = <code>true</code>} Controls the display of the outline circle of the crosshairs</li>
<li><code>interval</code> {Number = <code>2</code>} Sub-grid granularity per square. Snap points will be created every 1/<code>interval</code> grid spaces. Positive values begin snapping at grid intersections. Negative values begin snapping at the center of the square. Ex. the default value of 2 produces two snap points -- one at the edge and one at the center; <code>interval</code> of 1 will snap to grid intersections; <code>interval</code> of -1 will snap to grid centers. Additionally, a value of <code>0</code> will turn off grid snapping completely for this instance of crosshairs.</li>
<li><code>fillAlpha</code> {Number = <code>0</code>} Alpha (opacity) of the template's fill color (if any).</li>
<li><code>fillColor</code> {String = <code>game.user.color</code>} Color of the template's fill when no texture is used.</li>
<li><code>texture</code> {String = null} Asset path of the texture to draw inside the crosshairs border.</li>
<li><code>tileTexture</code> {Boolean = false} Indicates if the texture is tileable and does not need specific offset/scaling to be drawn correctly. By default, the chosen texture will be position and scaled such that the center of the texture image resides at the center of the crosshairs template.</li>
<li><code>lockSize</code> {Boolean = true} Controls the ability of the user to scale the size of the crosshairs using shift+scroll. When locked, shift+scroll acts as a &quot;coarse rotation&quot; step for rotating the center icon.</li>
<li><code>lockPosition</code> {Boolean = false} Prevents updating the position of the crosshair based on mouse movement. Typically used in combination with the <code>show</code> callback to lock position conditionally.</li>
<li><code>rememberControlled</code> {Boolean = false} Will restore the previously selected tokens after using crosshairs.</li>
</ul>
<h2>Crosshairs Callback Functions</h2>
<p>The <code>callbacks</code> object, as used by <code>show</code>, has one expected key: <code>show</code></p>
<h3>show</h3>
<p>Expected signature: <code>await show(crosshairs)</code></p>
<p>Called after the crosshairs have be drawn and listeners activate. This function is not awaited</p>
<ul>
<li><code>crosshairs</code> {Crosshairs} The current crosshairs template that has just been drawn. Derived from MeasuredTemplate and can be modified to alter the appears of the crosshairs itself. All of the fields in the <a href="#crosshairs-config">Crosshairs Config</a> object can be modified directly. Any fields owned by MeasuredTemplate must be changed via <code>crosshairs.update</code> as other DocumentData classes. Async functions will run in parallel while the user is moving the crosshairs. Serial functions will block detection of the left and right click operations until return.</li>
</ul>
<h2>Helper Functions</h2>
<h3>wait</h3>
<p>Signature: <code>async warpgate.wait(timeMs)</code></p>
<p>Helper function. Waits for a specified amount of time in milliseconds (be sure to await!). Useful for timings with animations in the pre/post callbacks.</p>
<h3>dismiss</h3>
<p>Signature: <code>async warpgate.dismiss(tokenId, sceneId)</code></p>
<p>Deletes the specified token from the specified scene. This function allows anyone to delete any specified token unless this functionality is restricted to only owned tokens in Warp Gate's module settings. This is the same function called by the &quot;Dismiss&quot; header button on owned actor sheets.</p>
<h3>buttonDialog</h3>
<p>Signature: <code>async warpgate.buttonDialog(data, direction = 'row')</code></p>
<p>Helper function for quickly creating a simple dialog with labeled buttons and associated data. Useful for allowing a choice of actors to spawn prior to <code>warpgate.spawn</code>.</p>
<ul>
<li><code>data</code> {Objects}: Standard dialog keys apart from the contents of <code>data.buttons</code>, which is an array of objects containing two keys <code>label</code> and <code>value</code>. Label corresponds to the button's text. Value corresponds to the return value if this button is pressed. Ex. <code>{buttons: [{label: 'First Choice', value: {token: {name: 'First'}}}, {label: 'Second Choice', value: {token: {name: 'Second'}}}]}</code>
<ul>
<li><code>data.options</code> will be forwarded to the Dialog constructor as part of its <code>options</code> argument.</li>
</ul>
</li>
<li><code>direction</code> {String} (optional): <code>'column'</code> or <code>'row'</code> accepted. Controls layout direction of dialog.</li>
</ul>
<h3>dialog</h3>
<p><em>Deprecated as of 1.14.0. To be removed in 2.2.0</em></p>
<p>Signature: <code>async warpgate.dialog(data, title = 'Prompt', submitLabel = 'Ok')</code></p>
<p>Helper function for creating a more advanced dialog prompt. Can contain many different types of inputs as well as headers and informational text.
<code>data</code> {Array of Objects}: Contains the dialog data. Each Object requires the following keys <code>{type, label, options}</code>.</p>
<ul>
<li><code>type</code> {String} : See table below.</li>
<li><code>label</code> {String}: the displayed text for this input. Accepts HTML.</li>
<li><code>options</code>: See table below.</li>
<li><code>value</code>: Primitive to be returned as the value for <code>radio</code> and <code>checkbox</code> type inputs. Returns false if unselected/unchecked.</li>
</ul>
<p><code>return value</code> {Array of *}: Length and order mirrors the input <code>data</code> array. The type of the elements is shown on the table below.</p>
<table>
<thead>
<tr>
<th><code>type</code></th>
<th><code>options</code></th>
<th><code>ret val</code></th>
<th>notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>button</td>
<td>none</td>
<td>undefined</td>
<td>Ignored entirely (use <code>buttonDialog</code>).</td>
</tr>
<tr>
<td>header</td>
<td>none</td>
<td>undefined</td>
<td>Shortcut for `info</td>
</tr>
<tr>
<td>info</td>
<td>none</td>
<td>undefined</td>
<td>Inserts a line of text for display/informational purposes.</td>
</tr>
<tr>
<td>text</td>
<td>default value</td>
<td>{String} final value of text field</td>
<td></td>
</tr>
<tr>
<td>password</td>
<td>(as <code>text</code>)</td>
<td>(as <code>text</code>)</td>
<td>Characters are obscured for security.</td>
</tr>
<tr>
<td>radio</td>
<td>[group name, default state (<code>false</code>)] {Array of String/Bool}</td>
<td>selected: {Class<Primitive>} <code>value</code>. un-selected: {Boolean} <code>false</code></td>
<td>For a given group name, only one radio button can be selected.</td>
</tr>
<tr>
<td>checkbox</td>
<td>default state (<code>false</code>) {Boolean}</td>
<td>{Boolean} <code>value</code>/<code>false</code> checked/unchecked</td>
<td><code>label</code> is used for the HTML element's <code>name</code> property</td>
</tr>
<tr>
<td>number</td>
<td>(as <code>text</code>)</td>
<td>{Number} final value of text field converted to a number</td>
<td></td>
</tr>
<tr>
<td>select</td>
<td>array of option labels</td>
<td>{String} label of choice</td>
<td></td>
</tr>
</tbody>
</table>
<h3>menu</h3>
<p>Signature: <code>async menu({inputs = [], buttons = []} = {}, {title = 'Prompt', defaultButton = 'Ok', options={}, render, close = (resolve, ...args) =&gt; resolve({buttons: false})} = {})</code></p>
<p>Advanced dialog helper providing multiple input type options as well as user defined buttons. This combines the functionality of <code>buttonDialog</code> and <code>dialog</code>. An example can be found <a href="https://github.com/trioderegion/warpgate/wiki/Basic-Menu">on the wiki</a>.</p>
<ul>
<li><code>data</code> {Object} Information about the dialog to be shown.
<ul>
<li><code>inputs</code> {Array&lt;Object&gt;} Refer to the <a href="#dialog">dialog helper's</a> <code>data</code> parameter.</li>
<li><code>buttons</code> {Array&lt;Object&gt;} Array of objects containing two keys: <code>label</code> and <code>value</code>. Label corresponds to the button's text. Value corresponds to the return value if this button is pressed. Ex. <code>{buttons: [{label: 'First Choice', value: {token: {name: 'First'}}}, {label: 'Second Choice', value: {token: {name: 'Second'}}}]}</code></li>
</ul>
</li>
<li><code>options</code> {Object}
<ul>
<li><code>title</code> {String} Title of this menu.</li>
<li><code>defaultButton</code> {String} Label of the default button if no other buttons are provided.</li>
<li><code>render</code> {Function} render callback accepting <code>html</code></li>
<li><code>close</code> {Function} close callback executed when dialog is closed, accepts <code>resolve</code> and <code>...args</code>, which contains all arguments provided by the call from Dialog.</li>
<li><code>options</code> {Object} Options object forwarded to the Application class constructor.</li>
</ul>
</li>
</ul>
<p><code>return value</code> {Object} <code>{inputs: Array, buttons: *}</code>: This object contains the results of the menu selections.</p>
<ul>
<li><code>inputs</code> Array of the same type as <a href="#dialog">dialog's</a> return value.</li>
<li><code>buttons</code> A single value corresponding to the <code>value</code> of button pressed. If no buttons were provided the default button's return value is <code>true</code>. If the menu is closed, this value is <code>false</code>.</li>
</ul>
<h3>firstGM</h3>
<p>Signature: <code>warpgate.util.firstGM()</code></p>
<p>A helper functions that returns the first active GM level user.</p>
<h3>isFirstGM</h3>
<p>Signature: <code>warpgate.util.isFirstGM()</code></p>
<p>Checks whether the user calling this function is the user returned by warpgate.firstGM(). Returns true if they are, false if they are not.</p>
<h3>firstOwner</h3>
<p>Signature: <code>warpgate.util.firstOwner(document)</code></p>
<p>Returns the first active user with owner permissions for the given document, falling back to the firstGM should there not be any. Returns false if the document is falsey. In the case of token documents it checks the permissions for the token's actor as tokens themselves do not have a permission object.</p>
<h3>isFirstOwner</h3>
<p>Signature: <code>warpgate.util.isFirstOwner(document)</code></p>
<p>Checks whether the user calling this function is the user returned by warpgate.firstOwner() when the function is passed the given document. Returns true if they are the same, false if they are not.</p>
<h2>Update Shorthand</h2>
<p>The <code>update</code> object can contain up to three keys: <code>token</code>, <code>actor</code>, and <code>embedded</code>. The <code>token</code> and <code>actor</code> key values are standard update objects as one would use in <code>Actor#update</code> and <code>Token#update</code>.  The <code>embedded</code> key uses a shorthand notation to make creating the updates for embedded documents (such as items) easier. Notably, it does not require the <code>_id</code> field to be part of the update object for a given embedded document type.  There are three operations that this object controls -- adding, updating, deleting (in that order).</p>
<p>Note: As of 1.7.0, the <code>item</code> field of the update object has been deprecated. Instead, place the value of the item field at <code>update.embedded.Item</code>. Support for this field will be removed in 1.9.0.</p>
<h3>Add</h3>
<p>Given a key of a <strong>non-existing</strong> embedded document, the value contains the data object for document creation compatible with <code>createEmbeddedDocuments</code>. This object can be constructed in-place by hand, or gotten from a template document and modified using <code>&quot;Item To Add&quot;: game.items.getName(&quot;Name of Item&quot;).data</code>. As an example. Note: the name contained in the key will override the <code>name</code> field in any provided creation data.</p>
<h3>Update</h3>
<p>Given a key of an existing document, the value contains the data object compatible with <code>updateEmbeddedDocuments</code></p>
<h3>Delete</h3>
<p>Assigning the key to the special constant <code>warpgate.CONST.DELETE</code> will remove this document (if it exists) from the spawned actor. e.g.
<code>{&quot;Item Name To Delete&quot;: warpgate.CONST.DELETE}</code></p>
<h3><code>embedded</code> Structure</h3>
<p>The <code>embedded</code> field expects an object with keys corresponding to a embedded document type. Each value for these keys contains an object keyed by &quot;comparison names&quot;. Each value for the comparison name keys is an object compatible with the desired add, update, or delete operation.
<code>{ Embedded Name : { Comparison Name : Update Object, Next Comparison Name : Update Object, etc...} }</code></p>
<h2>Event System</h2>
<p>Warp Gate includes a hook-like event system that can be used to respond to stages of the spawning and dismissal process. Additionally, the event notify function is exposed so that users and module authors can create custom events in any context.</p>
<p>The console log below shows the order of the built-in Warp Gate events as they related to spawning and dismissing a token:</p>
<p><img src=".github/assets/event_timing.png" alt="Event_Flow"></p>
<h3>watch</h3>
<p>Signature: <code>warpgate.event.watch(eventName, function, conditionFn = () =&gt; { return true; })</code></p>
<p>Similar in operation to <code>Hooks.on</code>, with two exceptions. First, the provided function can be asynchronous and will be awaited. Second, an optional <code>conditionFn</code> parameter is added to help comparmentalize logic between detecting the desired event and responding to said event.</p>
<ul>
<li>
<p><code>eventName</code> {String} Event name to watch for; It is recommended to use the enums found in <code>warpgate.EVENT</code>.</p>
</li>
<li>
<p><code>function</code> {async Function(eventData)} Function to execute when this event has passed the condition function. Will be awaited</p>
</li>
<li>
<p><code>conditionFn</code> {Function(eventData)} Optional. Function to determine if the primary function should be executed.</p>
</li>
<li>
<p><code>return value</code> {Number} Function id assigned to this event.</p>
</li>
</ul>
<h3>trigger</h3>
<p><code>warpgate.event.trigger(eventName, function, conditionFn)</code></p>
<p>Identical to <code>watch</code>, except that this function will only be called once, when the condition is met.</p>
<ul>
<li>
<p><code>eventName</code> {String} Event name on which to trigger; It is recommended to use the enums found in <code>warpgate.EVENT</code>.</p>
</li>
<li>
<p><code>function</code> {async Function(eventData)} Function to execute when this event has passed the condition function. Will be awaited.</p>
</li>
<li>
<p><code>conditionFn</code> {Function(eventData)} Optional. Determine if the primary function should be executed.</p>
</li>
<li>
<p><code>return value</code> {Number} Function id assigned to this event.</p>
</li>
</ul>
<h3>remove</h3>
<p>Signature: <code>warpgate.event.remove(functionId)</code></p>
<p>Removes a <code>watch</code> or <code>trigger</code> by its provided id -- obtained by the return value of <code>watch</code> and <code>trigger</code>.</p>
<ul>
<li>
<p><code>functionId</code> {Number} Id of function to remove.</p>
</li>
<li>
<p><code>return value</code> {Boolean} Indicates if a function was successfully found and removed.</p>
</li>
</ul>
<h3>notify</h3>
<p>Signature: <code>async warpgate.event.notify(eventName, eventData, onBehalf = game.user.id)</code></p>
<p>Allow custom events to be fired using the Warp Gate event system. Is broadcast to all users, including the initiator.</p>
<ul>
<li>
<p>eventName {String} Name of this event. Watches and triggers use this name to register themselves.</p>
</li>
<li>
<p>eventData {Object} The data that will be provided to watches and triggers and their condition functions.</p>
</li>
<li>
<p>onBehalf {String} User ID that will be used in place of the current user in the cases of a relayed request to the GM (e.g. dismissal).</p>
</li>
<li>
<p><code>return value</code> {Promise} The client that initiated this event can optionally wait for the event's <em>local</em> execution to finish before moving on.</p>
</li>
</ul>
<h3>eventData</h3>
<p>The following table describes the stock events that occur within warpgate. All event names are contained within <code>warpgate.EVENT</code></p>
<table>
<thead>
<tr>
<th>Event</th>
<th>Data</th>
<th>Timing</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><common></td>
<td>{sceneId, userId}</td>
<td></td>
<td>userId is the initiator</td>
</tr>
<tr>
<td>PLACEMENT</td>
<td>{templateData, tokenData}</td>
<td>After placement has been decided</td>
<td>The MeasuredTemplate data used to spawn the token, and the final token data that will be spawned. There is no actor data provided.</td>
</tr>
<tr>
<td>SPAWN</td>
<td>{uuid, updates, options, iteration}</td>
<td>After each token has been created</td>
<td>UUID of created token, updates applied to the token, options used for spawning, and iteration this token was spawned on.</td>
</tr>
<tr>
<td>DISMISS</td>
<td>{actorData}</td>
<td>After any token is dismissed via <code>warpgate.dismiss</code></td>
<td>see <strong>actorData</strong>, below</td>
</tr>
<tr>
<td>MUTATE</td>
<td>{uuid, updates, options}</td>
<td>After a token has been mutated, but before the initiating client has run its post mutate callback</td>
<td>UUID of modified token, updates applied to the token, options used for mutation.</td>
</tr>
<tr>
<td>REVERT</td>
<td>{uuid, updates}</td>
<td>After a token has been fully reverted to its previous state</td>
<td>UUID of reverted token, updates applied to produce the final reverted state.</td>
</tr>
<tr>
<td>REVERT_RESPONSE</td>
<td>{accepted, tokenId, mutationId}</td>
<td>After a revert request has been accepted or rejected, but no changes have been made</td>
<td>Accecpted state, token id, mutation id reverted.</td>
</tr>
<tr>
<td>MUTATE_RESPONSE</td>
<td>{tokenId, mutationId, accepted, updates}</td>
<td>After a mutation has been accepted or rejected by the owner, but no changes have been applied.</td>
<td><code>mutationId</code> is the name provided in <code>options.name</code> OR a randomly assigned ID if not provided. Callback functions provided for remote mutations will be internally converted to triggers for this event and do not need to be registered manually by the user. <code>accepted</code> is a bool field that indicates if the remote user accepted the mutation.</td>
</tr>
</tbody>
</table>
<h4>actorData</h4>
<p>This object is a customized version of <code>Actor#toObject</code> with the following change:</p>
<ul>
<li><code>token</code> now contains the final token data, including position. Equivalent to <code>Token#toObject</code> with its <code>actorData</code> field removed (as it is redundant).</li>
</ul>
<h2>Special Thanks</h2>
<ul>
<li>siliconsaint for the inspiration to turn a set of absurd macros into something usable and constantly pushing the envelope.</li>
<li>LorduFreeman for the pre and post callbacks and immediately using it for beautiful things.</li>
<li>Wasp for pushing me to make Crosshairs more full featured.</li>
<li>Arbron for the initial v9+v10 conversion updates.</li>
<li>Mr. Vaux for stretching warpgate's malleability to its limit.</li>
</ul></article>
    </section>






    </div>

    <footer class="footer" id="footer">
      
    </footer>

    <script src="scripts/third-party/prettify.js"></script>
    <script src="scripts/third-party/lang-css.js"></script>
    <script type="text/javascript" src="scripts/misc.js"></script>

    <script>prettyPrint();</script>
    <script src="scripts/linenumber.js"></script>
    <script src="scripts/fix-code-block.js"></script>
    <script src="scripts/fix-navbar.js"></script>
    
      <script src="scripts/search.js"></script>
      <script src="scripts/third-party/fuse.js"></script>
      <script>
        var list = [{"title":"Crosshairs","link":"<a href=\"Crosshairs.html\">Crosshairs</a>"},{"title":"Crosshairs.getTag","link":"<a href=\"Crosshairs.html#.getTag\">Crosshairs &rtrif; getTag</a>"},{"title":"Crosshairs#_drawControlIcon","link":"<a href=\"Crosshairs.html#_drawControlIcon\">Crosshairs &rtrif; _drawControlIcon</a>"},{"title":"Crosshairs#_drawRulerText","link":"<a href=\"Crosshairs.html#_drawRulerText\">Crosshairs &rtrif; _drawRulerText</a>"},{"title":"Crosshairs#activatePreviewListeners","link":"<a href=\"Crosshairs.html#activatePreviewListeners\">Crosshairs &rtrif; activatePreviewListeners</a>"},{"title":"Crosshairs#draw","link":"<a href=\"Crosshairs.html#draw\">Crosshairs &rtrif; draw</a>"},{"title":"Crosshairs#drawPreview","link":"<a href=\"Crosshairs.html#drawPreview\">Crosshairs &rtrif; drawPreview</a>"},{"title":"Crosshairs#refresh","link":"<a href=\"Crosshairs.html#refresh\">Crosshairs &rtrif; refresh</a>"},{"title":"Crosshairs#toObject","link":"<a href=\"Crosshairs.html#toObject\">Crosshairs &rtrif; toObject</a>"},{"title":"MutationStack","link":"<a href=\"MutationStack.html\">MutationStack</a>"},{"title":"MutationStack#commit","link":"<a href=\"MutationStack.html#commit\">MutationStack &rtrif; commit</a>"},{"title":"MutationStack#deleteAll","link":"<a href=\"MutationStack.html#deleteAll\">MutationStack &rtrif; deleteAll</a>"},{"title":"MutationStack#find","link":"<a href=\"MutationStack.html#find\">MutationStack &rtrif; find</a>"},{"title":"MutationStack#getName","link":"<a href=\"MutationStack.html#getName\">MutationStack &rtrif; getName</a>"},{"title":"MutationStack#update","link":"<a href=\"MutationStack.html#update\">MutationStack &rtrif; update</a>"},{"title":"MutationStack#updateAll","link":"<a href=\"MutationStack.html#updateAll\">MutationStack &rtrif; updateAll</a>"},{"title":"warpgate","link":"<a href=\"warpgate.html\">warpgate</a>"},{"title":"warpgate.buttonDialog","link":"<a href=\"warpgate.html#.buttonDialog\">warpgate &rtrif; buttonDialog</a>"},{"title":"warpgate.dismiss","link":"<a href=\"warpgate.html#.dismiss\">warpgate &rtrif; dismiss</a>"},{"title":"warpgate.menu","link":"<a href=\"warpgate.html#.menu\">warpgate &rtrif; menu</a>"},{"title":"warpgate.mutate","link":"<a href=\"warpgate.html#.mutate\">warpgate &rtrif; mutate</a>"},{"title":"warpgate.mutationStack","link":"<a href=\"warpgate.html#.mutationStack\">warpgate &rtrif; mutationStack</a>"},{"title":"warpgate.revert","link":"<a href=\"warpgate.html#.revert\">warpgate &rtrif; revert</a>"},{"title":"warpgate.spawn","link":"<a href=\"warpgate.html#.spawn\">warpgate &rtrif; spawn</a>"},{"title":"warpgate.spawnAt","link":"<a href=\"warpgate.html#.spawnAt\">warpgate &rtrif; spawnAt</a>"},{"title":"warpgate.wait","link":"<a href=\"warpgate.html#.wait\">warpgate &rtrif; wait</a>"},{"title":"abstract","link":"<a href=\"warpgate.abstract.html\">abstract</a>"},{"title":"crosshairs","link":"<a href=\"warpgate.crosshairs.html\">crosshairs</a>"},{"title":"warpgate.crosshairs.collectPlaceables","link":"<a href=\"warpgate.crosshairs.html#.collectPlaceables\">warpgate &rtrif; crosshairs</a>"},{"title":"warpgate.crosshairs.getTag","link":"<a href=\"warpgate.crosshairs.html#.getTag\">warpgate &rtrif; crosshairs</a>"},{"title":"warpgate.crosshairs.show","link":"<a href=\"warpgate.crosshairs.html#.show\">warpgate &rtrif; crosshairs</a>"},{"title":"dnd5e","link":"<a href=\"warpgate.dnd5e.html\">dnd5e</a>"},{"title":"warpgate.dnd5e.rollItem","link":"<a href=\"warpgate.dnd5e.html#.rollItem\">warpgate &rtrif; dnd5e</a>"},{"title":"event","link":"<a href=\"warpgate.event.html\">event</a>"},{"title":"plugin","link":"<a href=\"warpgate.plugin.html\">plugin</a>"},{"title":"warpgate.plugin.queueUpdate","link":"<a href=\"warpgate.plugin.html#.queueUpdate\">warpgate &rtrif; plugin</a>"},{"title":"util","link":"<a href=\"warpgate.util.html\">util</a>"},{"title":"warpgate.util.firstGM","link":"<a href=\"warpgate.util.html#.firstGM\">warpgate &rtrif; util</a>"},{"title":"warpgate.util.firstOwner","link":"<a href=\"warpgate.util.html#.firstOwner\">warpgate &rtrif; util</a>"},{"title":"warpgate.util.isFirstGM","link":"<a href=\"warpgate.util.html#.isFirstGM\">warpgate &rtrif; util</a>"},{"title":"warpgate.util.isFirstOwner","link":"<a href=\"warpgate.util.html#.isFirstOwner\">warpgate &rtrif; util</a>"},{"title":"ComparisonKeys","link":"<a href=\"global.html#ComparisonKeys\">ComparisonKeys</a>"},{"title":"CrosshairsConfig","link":"<a href=\"global.html#CrosshairsConfig\">CrosshairsConfig</a>"},{"title":"CrosshairsData","link":"<a href=\"global.html#CrosshairsData\">CrosshairsData</a>"},{"title":"MutationData","link":"<a href=\"global.html#MutationData\">MutationData</a>"},{"title":"MutationOptions","link":"<a href=\"global.html#MutationOptions\">MutationOptions</a>"},{"title":"ParallelShow","link":"<a href=\"global.html#ParallelShow\">ParallelShow</a>"},{"title":"PostDelta","link":"<a href=\"global.html#PostDelta\">PostDelta</a>"},{"title":"PostMutate","link":"<a href=\"global.html#PostMutate\">PostMutate</a>"},{"title":"PostSpawn","link":"<a href=\"global.html#PostSpawn\">PostSpawn</a>"},{"title":"PreSpawn","link":"<a href=\"global.html#PreSpawn\">PreSpawn</a>"},{"title":"Shorthand","link":"<a href=\"global.html#Shorthand\">Shorthand</a>"},{"title":"SpawningOptions","link":"<a href=\"global.html#SpawningOptions\">SpawningOptions</a>"},{"title":"WarpOptions","link":"<a href=\"global.html#WarpOptions\">WarpOptions</a>"},{"title":"WorkflowOptions","link":"<a href=\"global.html#WorkflowOptions\">WorkflowOptions</a>"}];
        var options = 
          setupSearch(list, options)
      </script>
    

    

    

    


  </body>

</html>